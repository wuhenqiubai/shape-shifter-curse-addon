{
    "type": "origins:multiple",
    "toggle_state": {
        "type": "origins:resource",
        "min": 0,
        "max": 1,
        "start_value": 0,
        "hud_render": {
            "should_render": false
        }
    },
    "cooldown_timer": {
        "type": "origins:resource",
        "min": 0,
        "max": 400,
        "start_value": 0,
        "hud_render": {
            "should_render": false,
            "bar_index": 5
        }
    },
    "cooldown_tick": {
        "type": "origins:action_over_time",
        "interval": 1,
        "entity_action": {
            "type": "origins:change_resource",
            "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
            "operation": "add",
            "change": -1
        },
        "condition": {
             "type": "origins:resource",
             "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
             "comparison": ">",
             "compare_to": 0
        }
    },
    "internal_timer": {
        "type": "origins:resource",
        "min": 0,
        "max": 10,
        "start_value": 0,
        "hud_render": {
            "should_render": false
        }
    },
    "key_activation": {
        "type": "origins:active_self",
        "key": {
            "key": "key.ssc_addon.sp_primary"
        },
        "cooldown": 20,
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "origins:resource",
                        "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                        "comparison": "==",
                        "compare_to": 1
                    },
                    "if_action": {
                        "type": "origins:and",
                        "actions": [
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                                "operation": "set",
                                "change": 0
                            },
                            {
                                "type": "origins:clear_effect",
                                "effect": "ssc_addon:blue_fire_ring"
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
                                "operation": "set",
                                "change": 400
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_internal_timer",
                                "operation": "set",
                                "change": 0
                            },
                            {
                                "type": "origins:play_sound",
                                "sound": "minecraft:block.fire.extinguish",
                                "volume": 0.5,
                                "pitch": 1.0
                            }
                        ]
                    },
                    "else_action": {
                        "type": "origins:if_else",
                        "condition": {
                            "type": "shape-shifter-curse:has_mana",
                            "mana": 99.0
                        },
                        "if_action": {
                            "type": "origins:and",
                            "actions": [
                                {
                                    "type": "origins:change_resource",
                                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                                    "operation": "set",
                                    "change": 1
                                },
                                {
                                    "type": "origins:change_resource",
                                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_internal_timer",
                                    "operation": "set",
                                    "change": 0
                                },
                                {
                                    "type": "origins:apply_effect",
                                    "effect": {
                                        "effect": "ssc_addon:blue_fire_ring",
                                        "duration": 200000,
                                        "amplifier": 0,
                                        "is_ambient": true,
                                        "show_particles": false,
                                        "show_icon": true
                                    }
                                },
                                {
                                    "type": "origins:play_sound",
                                    "sound": "minecraft:item.firecharge.use",
                                    "volume": 0.5,
                                    "pitch": 1.0
                                }
                            ]
                        }
                    }
                }
            ]
        },
        "condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
                    "comparison": "==",
                    "compare_to": 0
                },
                {
                    "type": "ssc_addon:has_blue_fire_amulet",
                    "inverted": true
                }
            ]
        },
        "name": "Blue Fire Ring (Normal)",
        "description": "Create a ring of blue fire.",
        "icon": {
            "texture": "my_addon:textures/gui/powers/blue_fire_aura_effect.png"
        }
    },
    "state_sync_check": {
        "type": "origins:action_over_time",
        "interval": 20,
        "condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "comparison": "==",
                    "compare_to": 1
                },
                {
                    "type": "origins:status_effect",
                    "effect": "ssc_addon:blue_fire_ring",
                    "inverted": true
                }
            ]
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "operation": "set",
                    "change": 0
                },
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
                    "operation": "set",
                    "change": 400
                }
            ]
        }
    },
    "validate_amulet_state": {
        "type": "origins:action_over_time",
        "interval": 20,
        "condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "comparison": "==",
                    "compare_to": 1
                },
                {
                    "type": "ssc_addon:has_blue_fire_amulet"
                }
            ]
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "operation": "set",
                    "change": 0
                },
                {
                    "type": "origins:clear_effect",
                    "effect": "ssc_addon:blue_fire_ring"
                },
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
                    "operation": "set",
                    "change": 400
                },
                {
                    "type": "origins:play_sound",
                    "sound": "minecraft:block.fire.extinguish",
                    "volume": 0.5,
                    "pitch": 1.0
                }
            ]
        }
    },
    "effects_loop": {
        "type": "origins:action_over_time",
        "interval": 4,
        "condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "comparison": "==",
                    "compare_to": 1
                },
                {
                    "type": "ssc_addon:has_blue_fire_amulet",
                    "inverted": true
                }
            ]
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "shape-shifter-curse:has_mana",
                        "mana": 16.0
                    },
                    "if_action": {
                        "type": "shape-shifter-curse:consume_mana",
                        "mana": 1.7
                    },
                    "else_action": {
                        "type": "origins:and",
                        "actions": [
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                                "operation": "set",
                                "change": 0
                            },
                            {
                                "type": "origins:clear_effect",
                                "effect": "ssc_addon:blue_fire_ring"
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_cooldown_timer",
                                "operation": "set",
                                "change": 400
                            },
                            {
                                "type": "origins:play_sound",
                                "sound": "minecraft:block.fire.extinguish",
                                "volume": 0.5,
                                "pitch": 1.0
                            }
                        ]
                    }
                },
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_internal_timer",
                    "operation": "add",
                    "change": 1
                },
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "origins:resource",
                        "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_internal_timer",
                        "comparison": ">=",
                        "compare_to": 5
                    },
                    "if_action": {
                        "type": "origins:and",
                        "actions": [
                             {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_internal_timer",
                                "operation": "set",
                                "change": 0
                             },
                             {
                                "type": "origins:area_of_effect",
                                "radius": 6.0,
                                "bientity_action": {
                                    "type": "origins:and",
                                    "actions": [
                                        {
                                            "type": "my_addon:damage_target_from_actor",
                                            "amount": 4.0,
                                            "damage_type": "minecraft:generic"
                                        },
                                        {
                                            "type": "origins:target_action",
                                            "action": {
                                                "type": "origins:apply_effect",
                                                "effect": {
                                                    "effect": "ssc_addon:fox_fire_burn",
                                                    "duration": 60,
                                                    "amplifier": 0,
                                                    "is_ambient": false,
                                                    "show_particles": true,
                                                    "show_icon": true
                                                }
                                            }
                                        }
                                    ]
                                },
                                "bientity_condition": {
                                    "type": "origins:and",
                                    "conditions": [
                                        {
                                            "type": "origins:target_condition",
                                            "condition": {
                                                "type": "origins:living"
                                            }
                                        },
                                        {
                                            "type": "origins:target_condition",
                                            "condition": {
                                                "type": "origins:entity_type",
                                                "entity_type": "minecraft:player"
                                            },
                                            "inverted": true
                                        },
                                        {
                                            "type": "origins:target_condition",
                                            "condition": {
                                                 "type": "origins:tamed"
                                            },
                                            "inverted": true
                                        }
                                    ]
                                }
                             }
                        ]
                   }
                }
            ]
        }
    },
    "particle_loop": {
        "type": "origins:action_over_time",
        "interval": 4,
        "condition": {
            "type": "origins:and",
            "conditions": [
                {
                    "type": "origins:resource",
                    "resource": "my_addon:form_familiar_fox_sp_blue_fire_ring_toggle_state",
                    "comparison": "==",
                    "compare_to": 1
                },
                {
                    "type": "ssc_addon:has_blue_fire_amulet",
                    "inverted": true
                }
            ]
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:execute_command",
                    "command": "particle minecraft:soul_fire_flame ~ ~0.5 ~ 3.0 0.1 3.0 0.02 10 force @a"
                },
                {
                    "type": "shape-shifter-curse:spawn_particles_in_circle",
                    "particle": "minecraft:soul_fire_flame",
                    "count": 1,
                    "speed": 0.02,
                    "force": true,
                    "spread": {
                        "x": 0.1,
                        "y": 0.1,
                        "z": 0.1
                    },
                    "radius": 6.0,
                    "sample_count": 64
                }
            ]
        }
    }
}
